import { SplitCodeExample } from '@/components/split-code-example'

const skirCode = `// shapes.skir

struct Point {
  x: int32;
  y: int32;
  label: string;
}

struct Shape {
  points: [Point];
  /// A short string describing this shape.
  label: string;
}

const TOP_RIGHT_CORNER: Point = {
  x = 600,
  y = 400,
  label = "top-right corner",
};`

const codeExamples = {
  typescript: `// Import the module generated by Skir
import { Point } from "../skirout/shapes";

// Construct a frozen (immutable) Point
const point = Point.create({
  x: 3,
  y: 4,
  label: "P"
});

// Serialize to dense JSON: compact and allows schema evolution
const pointJson = Point.serializer.toJson(point);
console.log(pointJson);  // [3, 4, "P"]

// Deserialize from JSON
const restored = Point.serializer.fromJson(pointJson);
console.log(restored.label);  // "P"`,

  python: `# Import the module generated by Skir
from skirout.shapes_skir import Point

# Construct a frozen (immutable) Point
point = Point(
    x=3,
    y=4,
    label="P",
)

# Serialize to dense JSON: compact and allows schema evolution
point_json = Point.serializer.to_json_code(point)
print(point_json)  # [3,4,"P"]

# Deserialize from JSON
restored = Point.serializer.from_json_code(point_json)
print(restored.label)  # P`,

  cpp: `// Include the generated header
#include "skirout/shapes.h"

using ::skirout_shapes::Point;

// Construct a Point
Point point = Point::whole{
    .label = "P",
    .x = 3,
    .y = 4,
};

// Serialize to dense JSON: compact and allows schema evolution
std::string point_json = skir::ToDenseJson(point);
std::cout << point_json << "\\n";  // [3,4,"P"]

// Deserialize from JSON
absl::StatusOr<Point> restored = skir::Parse<Point>(point_json);
std::cout << restored->label << "\\n";  // P`,

  kotlin: `// Import generated classes
import skirout.shapes.Point

// Construct a frozen (immutable) Point
val point = Point(
    x = 3,
    y = 4,
    label = "P",
)

// Serialize to dense JSON: compact and allows schema evolution
val pointJson = Point.serializer.toJsonCode(point)
println(pointJson)  // [3,4,"P"]

// Deserialize from JSON
val restored = Point.serializer.fromJsonCode(pointJson)
println(restored.label)  // P`,

  java: `// Import generated classes
import skirout.shapes.Point;

// Construct a frozen (immutable) Point
final Point point =
    Point.builder()
        .setLabel("P")
        .setX(3)
        .setY(4)
        .build();

// Serialize to dense JSON: compact and allows schema evolution
final String pointJson = Point.SERIALIZER.toJsonCode(point);
System.out.println(pointJson);  // [3,4,"P"]

// Deserialize from JSON
final Point restored = Point.SERIALIZER.fromJsonCode(pointJson);
System.out.println(restored.label());  // P`,

  dart: `// Import the generated library
import 'package:your_project/skirout/shapes.dart';

// Construct a frozen (immutable) Point
final point = Point(
  x: 3,
  y: 4,
  label: "P",
);

// Serialize to dense JSON: compact and allows schema evolution
final pointJson = Point.serializer.toJsonCode(point);
print(pointJson);  // [3,4,"P"]

// Deserialize from JSON
final restored = Point.serializer.fromJsonCode(pointJson);
print(restored.label);  // P`,
}

export function CodeExample() {
  return <SplitCodeExample skirCode={skirCode} codeExamples={codeExamples} />
}
